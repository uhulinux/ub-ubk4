#!/bin/sh -eux

# TBB: USD, OPENIMAGEDENOISE, OPENVDB, MOD_FLUID

pythonver=$(python -c 'import sys; print(".".join(map(str, sys.version_info[:2])))')
ub_compile \
	-DCMAKE_SKIP_RPATH=ON \
	-DBUILD_SHARED_LIBS=OFF \
	-DWITH_ALEMBIC=OFF \
	-DWITH_CODEC_FFMPEG=ON \
	-DWITH_CODEC_SNDFILE=ON \
	-DWITH_CYCLES_EMBREE=OFF \
	-DWITH_CXX_GUARDEDALLOC=OFF \
	-DWITH_CYCLES=ON \
	-DWITH_FFTW3=ON \
	-DWITH_GHOST_WAYLAND_LIBDECOR=OFF \
	-DWITH_INSTALL_PORTABLE=OFF \
	-DWITH_JACK=ON \
	-DWITH_OPENCOLLADA=ON \
	-DWITH_OPENCOLORIO=ON \
	-DWITH_OPENIMAGEIO=ON \
	-DWITH_PYTHON=ON \
	-DWITH_PYTHON_INSTALL=OFF \
	-DWITH_PYTHON_SAFETY=ON \
	-DWITH_TBB=OFF \
	-DWITH_USD=OFF \
    -DWITH_OPENIMAGEDENOISE=OFF \
    -DWITH_OPENVDB=OFF \
    -DWITH_MOD_FLUID=OFF \
	-DPYTHON_VERSION=$pythonver \
	-DPYTHON_LIBPATH=/usr/lib \
	-DPYTHON_LIBRARY=python$pythonver \
	-DPYTHON_INCLUDE_DIRS=/usr/include/python$pythonver
