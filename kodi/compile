#!/bin/sh -eux

pythonver=$(python -c 'import sys; print(".".join(map(str, sys.version_info[:2])))')

ub_compile \
	-DCMAKE_INSTALL_PREFIX=/usr \
	-DVERBOSE=ON \
	-Ddocdir=/usr/share/doc/Packages/kodi \
	-DENABLE_LDGOLD=OFF \
	-DENABLE_ALSA=ON \
	-DENABLE_AIRTUNES=OFF \
	-DENABLE_AVAHI=ON \
	-DENABLE_BLUETOOTH=ON  \
	-DENABLE_BLURAY=ON \
	-DENABLE_CCACHE=OFF \
	-DENABLE_CEC=OFF \
	-DENABLE_DBUS=ON \
	-DENABLE_INTERNAL_FMT=ON \
	-DENABLE_INTERNAL_FLATBUFFERS=ON \
	-DENABLE_INTERNAL_CROSSGUID=ON \
	-DENABLE_INTERNAL_RapidJSON=ON \
	-DENABLE_INTERNAL_FFMPEG=ON \
	-DENABLE_INTERNAL_GTEST=OFF \
	-DENABLE_INTERNAL_UDFREAD=ON \
	-DENABLE_INTERNAL_SPDLOG=ON \
	-DENABLE_INTERNAL_DAV1D=OFF \
	-DENABLE_CAP=ON \
	-DENABLE_LCMS2=ON \
	-DENABLE_LIRCCLIENT=ON \
	-DENABLE_MARIADBCLIENT=OFF \
	-DENABLE_MICROHTTPD=ON \
	-DENABLE_MYSQLCLIENT=OFF \
	-DENABLE_NFS=ON \
	-DENABLE_OPENGLES=OFF \
	-DENABLE_OPENGL=ON \
	-DENABLE_OPTICAL=OFF \
	-DENABLE_PLIST=ON \
	-DENABLE_PULSEAUDIO=ON \
	-DENABLE_SMBCLIENT=ON \
	-DENABLE_TESTING=OFF \
	-DENABLE_UDEV=ON \
	-DENABLE_UDFREAD=ON \
	-DENABLE_VAAPI=ON \
	-DENABLE_VDPAU=ON \
	-DENABLE_XSLT=ON \
	-DJava_JAVA_EXECUTABLE=/usr/lib/java/jre/bin/java \
	-DPYTHON_INCLUDE_DIR=/usr/include/python$pythonver \
	-DAPP_RENDER_SYSTEM=gl \
	-DENABLE_EGL=ON
