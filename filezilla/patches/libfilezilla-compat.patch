diff -Naur a/src/engine/sftp/sftpcontrolsocket.cpp b/src/engine/sftp/sftpcontrolsocket.cpp
--- a/src/engine/sftp/sftpcontrolsocket.cpp	2022-10-27 15:25:10.000000000 +0200
+++ b/src/engine/sftp/sftpcontrolsocket.cpp	2023-06-11 15:22:07.360389882 +0200
@@ -511,17 +511,14 @@
 	if (input_parser_) {
 		input_parser_.reset();
 
-		auto threadEventsFilter = [&](fz::event_loop::Events::value_type const& ev) -> bool {
-			if (ev.first != this) {
-				return false;
-			}
-			else if (ev.second->derived_type() == CSftpEvent::type() || ev.second->derived_type() == CSftpListEvent::type()) {
+		auto threadEventsFilter = [](fz::event_base const& ev) -> bool {
+			if (ev.derived_type() == CSftpEvent::type() || ev.derived_type() == CSftpListEvent::type()) {
 				return true;
 			}
 			return false;
 		};
 
-		event_loop_.filter_events(threadEventsFilter);
+		filter_events(threadEventsFilter);
 	}
 	process_.reset();
 
diff -Naur a/src/engine/storj/storjcontrolsocket.cpp b/src/engine/storj/storjcontrolsocket.cpp
--- a/src/engine/storj/storjcontrolsocket.cpp	2022-10-27 15:25:10.000000000 +0200
+++ b/src/engine/storj/storjcontrolsocket.cpp	2023-06-11 15:23:09.164626877 +0200
@@ -336,17 +336,14 @@
 	if (input_thread_) {
 		input_thread_.reset();
 
-		auto threadEventsFilter = [&](fz::event_loop::Events::value_type const& ev) -> bool {
-			if (ev.first != this) {
-				return false;
-			}
-			else if (ev.second->derived_type() == CStorjEvent::type() || ev.second->derived_type() == StorjTerminateEvent::type()) {
+		auto threadEventsFilter = [](fz::event_base const& ev) -> bool {
+			if (ev.derived_type() == CStorjEvent::type() || ev.derived_type() == StorjTerminateEvent::type()) {
 				return true;
 			}
 			return false;
 		};
 
-		event_loop_.filter_events(threadEventsFilter);
+		filter_events(threadEventsFilter);
 	}
 	process_.reset();
 
